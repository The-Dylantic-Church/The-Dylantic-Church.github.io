<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dylantic Church Documents</title>
<link rel="stylesheet" href="styles.css" />
</head>
<body>
  
<h1>Dylantic Church Documents</h1>

<div class="mode-toggle">
  <button id="modeButton">Switch to Mobile Mode</button>
</div>

<div id="docs-container"></div>

<script>
  const docs = [
    { title: "The Dylantic Creed", file: "dylantic-creed.pdf" },
    { title: "The Dylantic Catechism", file: "The-Dylantic-Catechism.pdf" },
    { title: "The Dylantic Declaration", file: "the-dylantic-declaration.pdf" },
    { title: "The Miaphysic Creed", file: "The-Miaphysic-Creed.pdf" },
    { title: "Dylantic Clergy Marriage and Celibacy Policy", file: "dylantic-clergy-marriage-and-celibacy-policy.pdf" },
    { title: "Dylantic Bible Canon", file: "dylantic-bible-canon.pdf" },
  ];

  function cleanFileName(file) {
    let base = file.replace(/\.pdf$/i, "");
    base = base.replace(/[-_]+/g, " ");
    base = base.replace(/\b\w/g, c => c.toUpperCase());
    return base + ".pdf";
  }

  function enterFocus(wrapper) {
    wrapper.classList.add("focus");
  }
  function exitFocus(wrapper) {
    wrapper.classList.remove("focus");
  }

  const container = document.getElementById("docs-container");

  docs.forEach((doc, index) => {
    const cleanName = cleanFileName(doc.file);
    const section = document.createElement("div");
    section.className = "doc-section";

    section.innerHTML = `
      <h2>Document ${index + 1}: ${doc.title}</h2>
      <div class="iframe-wrapper">
        <button class="back-button">Back</button>
        <iframe src="https://the-dylantic-church.github.io/assets/${doc.file}" type="application/pdf"></iframe>
      </div>
      <div class="doc-links">
        <a href="https://the-dylantic-church.github.io/assets/${doc.file}" download="${cleanName}">Download PDF</a>
        <a href="https://the-dylantic-church.github.io/assets/${doc.file}" target="_blank">Open in New Tab</a>
      </div>
    `;

    const wrapper = section.querySelector(".iframe-wrapper");
    const backButton = section.querySelector(".back-button");

    wrapper.addEventListener("click", () => enterFocus(wrapper));
    backButton.addEventListener("click", e => {
      e.stopPropagation();
      exitFocus(wrapper);
    });

    container.appendChild(section);
  });

  // Escape key closes focus mode
  document.addEventListener("keydown", e => {
    if (e.key === "Escape") {
      const focusWrapper = document.querySelector(".iframe-wrapper.focus");
      if (focusWrapper) exitFocus(focusWrapper);
    }
  });
</script>

</body>
</html>
